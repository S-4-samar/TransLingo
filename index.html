<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TransLingo - Neural Language Learning Platform</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --neon-cyan: #00ffff;
            --neon-purple: #8a2be2;
            --neon-pink: #ff1493;
            --neon-green: #00ff41;
            --neon-orange: #ff6600;
            --neon-yellow: #ffff00;
            --dark-bg: #0a0a0f;
            --darker-bg: #050508;
            --card-bg: rgba(15, 15, 25, 0.85);
            --glass-bg: rgba(20, 20, 35, 0.3);
            --text-primary: #e0e6ff;
            --text-secondary: #a0a6c0;
            --success-color: #00ff41;
            --error-color: #ff4444;
            --warning-color: #ffc107;
        }

        body {
            font-family: 'Rajdhani', monospace;
            background: var(--dark-bg);
            background-image:
                radial-gradient(circle at 25% 25%, rgba(138, 43, 226, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(0, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(255, 20, 147, 0.05) 0%, transparent 50%),
                linear-gradient(135deg, var(--darker-bg) 0%, var(--dark-bg) 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated background grid */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(rgba(0, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: gridMove 20s linear infinite;
            pointer-events: none;
            z-index: 1;
        }

        @keyframes gridMove {
            0% {
                transform: translate(0, 0);
            }

            100% {
                transform: translate(50px, 50px);
            }
        }

        /* Floating particles */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                radial-gradient(2px 2px at 20px 30px, rgba(0, 255, 255, 0.3), transparent),
                radial-gradient(2px 2px at 40px 70px, rgba(255, 20, 147, 0.3), transparent),
                radial-gradient(1px 1px at 90px 40px, rgba(138, 43, 226, 0.3), transparent),
                radial-gradient(1px 1px at 130px 80px, rgba(0, 255, 65, 0.3), transparent),
                radial-gradient(2px 2px at 160px 30px, rgba(0, 255, 255, 0.3), transparent);
            background-size: 200px 100px;
            animation: particlesFloat 15s ease-in-out infinite;
            pointer-events: none;
            z-index: 1;
        }

        @keyframes particlesFloat {

            0%,
            100% {
                transform: translateY(0px) rotate(0deg);
            }

            33% {
                transform: translateY(-30px) rotate(120deg);
            }

            66% {
                transform: translateY(20px) rotate(240deg);
            }
        }

        .app-container {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(0, 255, 255, 0.2);
            box-shadow:
                0 0 40px rgba(0, 255, 255, 0.1),
                inset 0 0 40px rgba(255, 20, 147, 0.05);
            width: 100%;
            max-width: 1200px;
            padding: 40px;
            animation: containerGlow 4s ease-in-out infinite alternate;
            position: relative;
            z-index: 10;
            min-height: 80vh;
        }

        @keyframes containerGlow {
            0% {
                box-shadow: 0 0 40px rgba(0, 255, 255, 0.1), inset 0 0 40px rgba(255, 20, 147, 0.05);
            }

            100% {
                box-shadow: 0 0 60px rgba(138, 43, 226, 0.2), inset 0 0 40px rgba(0, 255, 65, 0.08);
            }
        }

        .voice-btn {
            background: linear-gradient(45deg, var(--neon-cyan), var(--neon-purple));
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            color: var(--dark-bg);
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            position: fixed;
            top: 25px;
            right: 25px;
            overflow: hidden;
            z-index: 1000;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5), inset 0 0 10px rgba(255, 255, 255, 0.2);
            font-weight: bold;
        }

        .voice-btn::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, var(--neon-cyan), var(--neon-purple), var(--neon-pink), var(--neon-green));
            border-radius: 50%;
            z-index: -1;
            animation: borderRotate 2s linear infinite;
        }

        @keyframes borderRotate {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .voice-btn:hover {
            transform: scale(1.15);
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.8), inset 0 0 15px rgba(255, 255, 255, 0.3);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .logo {
            font-family: 'Orbitron', monospace;
            font-size: 3rem;
            font-weight: 900;
            background: linear-gradient(45deg, var(--neon-cyan), var(--neon-purple), var(--neon-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
            text-shadow: 0 0 30px rgba(0, 255, 255, 0.5);
            position: relative;
            display: inline-block;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.2rem;
            font-weight: 300;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
        }

        /* Navigation Menu */
        .nav-menu {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: linear-gradient(135deg, var(--glass-bg), rgba(0, 255, 255, 0.1));
            color: var(--text-primary);
            border: 2px solid rgba(0, 255, 255, 0.3);
            padding: 15px 25px;
            border-radius: 30px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            backdrop-filter: blur(10px);
            font-family: 'Rajdhani', monospace;
        }

        .nav-btn:hover,
        .nav-btn.active {
            transform: translateY(-3px);
            border-color: var(--neon-cyan);
            box-shadow: 0 10px 30px rgba(0, 255, 255, 0.3);
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.2), rgba(138, 43, 226, 0.1));
        }

        .nav-btn.active {
            background: linear-gradient(135deg, var(--neon-cyan), var(--neon-purple));
            color: var(--dark-bg);
        }

        /* Screen containers */
        .screen {
            display: none;
            animation: screenSlide 0.5s ease-out;
        }

        .screen.active {
            display: block;
        }

        @keyframes screenSlide {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Translation Screen (existing styles) */
        .language-selector {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 30px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .language-dropdown {
            position: relative;
        }

        .language-btn {
            background: linear-gradient(135deg, var(--glass-bg), rgba(0, 255, 255, 0.1));
            color: var(--text-primary);
            border: 2px solid rgba(0, 255, 255, 0.3);
            padding: 15px 25px;
            border-radius: 30px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 160px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            backdrop-filter: blur(10px);
            font-family: 'Rajdhani', monospace;
        }

        .language-btn:hover {
            transform: translateY(-3px);
            border-color: var(--neon-cyan);
            box-shadow: 0 10px 30px rgba(0, 255, 255, 0.3);
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.1), rgba(138, 43, 226, 0.1));
        }

        .swap-btn {
            background: linear-gradient(45deg, var(--neon-purple), var(--neon-pink));
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: var(--dark-bg);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            font-weight: bold;
        }

        .swap-btn:hover {
            transform: rotate(180deg) scale(1.1);
            box-shadow: 0 0 30px rgba(138, 43, 226, 0.6);
        }

        .dropdown {
            position: absolute;
            top: 110%;
            left: 0;
            right: 0;
            background: rgba(5, 5, 8, 0.95);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            max-height: 250px;
            overflow-y: auto;
            z-index: 2000;
            display: none;
            backdrop-filter: blur(15px);
        }

        .dropdown.show {
            display: block;
            animation: dropdownSlide 0.3s ease-out;
        }

        @keyframes dropdownSlide {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .dropdown-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--text-primary);
            font-weight: 500;
            border-left: 3px solid transparent;
        }

        .dropdown-item:hover {
            background: linear-gradient(90deg, rgba(0, 255, 255, 0.1), transparent);
            border-left-color: var(--neon-cyan);
            color: var(--neon-cyan);
            transform: translateX(5px);
        }

        .translation-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 40px;
        }

        @media (max-width: 768px) {
            .translation-container {
                grid-template-columns: 1fr;
                gap: 25px;
            }
        }

        .input-section,
        .output-section {
            background: var(--glass-bg);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 20px;
            padding: 25px;
            position: relative;
            backdrop-filter: blur(15px);
            transition: all 0.3s ease;
        }

        .input-section:hover,
        .output-section:hover {
            border-color: rgba(0, 255, 255, 0.4);
            box-shadow: 0 0 25px rgba(0, 255, 255, 0.1);
        }

        .section-label {
            font-weight: 700;
            color: var(--neon-cyan);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 0 0 10px currentColor;
        }

        .input-textarea {
            width: 100%;
            height: 180px;
            border: none;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 255, 255, 0.1);
            border-radius: 10px;
            resize: none;
            font-size: 1.1rem;
            line-height: 1.6;
            outline: none;
            font-family: 'Rajdhani', monospace;
            color: var(--text-primary);
            padding: 15px;
            transition: all 0.3s ease;
        }

        .input-textarea:focus {
            border-color: var(--neon-cyan);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
        }

        .input-textarea::placeholder {
            color: var(--text-secondary);
        }

        .output-text {
            width: 100%;
            height: 180px;
            font-size: 1.1rem;
            line-height: 1.6;
            color: var(--text-primary);
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(138, 43, 226, 0.2);
            border-radius: 10px;
            overflow-y: auto;
            padding: 15px;
            font-family: 'Rajdhani', monospace;
        }

        .char-count {
            position: absolute;
            bottom: 15px;
            right: 20px;
            font-size: 0.85rem;
            color: var(--text-secondary);
            background: rgba(0, 0, 0, 0.5);
            padding: 4px 8px;
            border-radius: 8px;
        }

        .features {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
        }

        .feature-btn {
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.1), rgba(138, 43, 226, 0.1));
            border: 2px solid rgba(0, 255, 255, 0.2);
            color: var(--neon-cyan);
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-family: 'Rajdhani', monospace;
            backdrop-filter: blur(10px);
        }

        .feature-btn:hover,
        .feature-btn.active {
            background: linear-gradient(135deg, var(--neon-cyan), var(--neon-purple));
            color: var(--dark-bg);
            border-color: var(--neon-cyan);
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 255, 255, 0.3);
        }

        /* Learning Screen Styles */
        .learning-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .category-card {
            background: var(--glass-bg);
            border: 2px solid rgba(0, 255, 255, 0.2);
            border-radius: 20px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(15px);
            position: relative;
            overflow: hidden;
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.1), transparent);
            transition: left 0.6s;
        }

        .category-card:hover::before {
            left: 100%;
        }

        .category-card:hover {
            transform: translateY(-10px);
            border-color: var(--neon-cyan);
            box-shadow: 0 20px 40px rgba(0, 255, 255, 0.2);
        }

        .category-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            display: block;
        }

        .category-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--neon-cyan);
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .category-description {
            color: var(--text-secondary);
            font-size: 1rem;
            line-height: 1.6;
        }

        .category-progress {
            margin-top: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--neon-cyan), var(--neon-purple));
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .progress-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-align: center;
        }

        /* Lessons Screen */
        .lessons-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
        }

        .lesson-card {
            background: var(--glass-bg);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(15px);
        }

        .lesson-card:hover {
            transform: translateY(-5px);
            border-color: var(--neon-green);
            box-shadow: 0 15px 30px rgba(0, 255, 65, 0.2);
        }

        .lesson-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 15px;
        }

        .lesson-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .lesson-difficulty {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .lesson-difficulty.beginner {
            background: rgba(0, 255, 65, 0.2);
            color: var(--neon-green);
            border: 1px solid rgba(0, 255, 65, 0.3);
        }

        .lesson-difficulty.intermediate {
            background: rgba(255, 193, 7, 0.2);
            color: var(--neon-yellow);
            border: 1px solid rgba(255, 193, 7, 0.3);
        }

        .lesson-difficulty.advanced {
            background: rgba(255, 68, 68, 0.2);
            color: var(--error-color);
            border: 1px solid rgba(255, 68, 68, 0.3);
        }

        .lesson-description {
            color: var(--text-secondary);
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .lesson-stats {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Test Screen Styles */
        .test-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .test-card {
            background: var(--glass-bg);
            border: 2px solid rgba(255, 20, 147, 0.2);
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(15px);
            text-align: center;
        }

        .test-card:hover {
            transform: scale(1.05);
            border-color: var(--neon-pink);
            box-shadow: 0 15px 35px rgba(255, 20, 147, 0.3);
        }

        .test-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .test-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--neon-pink);
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .test-description {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Quiz Interface */
        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .quiz-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .quiz-progress {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            height: 20px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .quiz-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--neon-cyan), var(--neon-purple), var(--neon-pink));
            transition: width 0.3s ease;
            border-radius: 20px;
        }

        .quiz-question {
            background: var(--glass-bg);
            border: 2px solid rgba(0, 255, 255, 0.3);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            backdrop-filter: blur(15px);
            text-align: center;
        }

        .question-text {
            font-size: 1.5rem;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .quiz-option {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(0, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-primary);
            font-size: 1.1rem;
            font-weight: 500;
        }

        .quiz-option:hover {
            border-color: var(--neon-cyan);
            background: rgba(0, 255, 255, 0.1);
            transform: translateY(-3px);
        }

        .quiz-option.selected {
            background: linear-gradient(135deg, var(--neon-cyan), var(--neon-purple));
            color: var(--dark-bg);
            border-color: var(--neon-cyan);
        }

        .quiz-option.correct {
            background: linear-gradient(135deg, var(--neon-green), rgba(0, 255, 65, 0.8));
            border-color: var(--neon-green);
        }

        .quiz-option.incorrect {
            background: linear-gradient(135deg, var(--error-color), rgba(255, 68, 68, 0.8));
            border-color: var(--error-color);
        }

        .quiz-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .quiz-btn {
            background: linear-gradient(135deg, var(--neon-purple), var(--neon-pink));
            border: none;
            color: var(--dark-bg);
            padding: 15px 30px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .quiz-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(138, 43, 226, 0.4);
        }

        .quiz-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Performance Screen Styles */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: var(--glass-bg);
            border: 2px solid rgba(138, 43, 226, 0.3);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            backdrop-filter: blur(15px);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(138, 43, 226, 0.2);
        }

        .stat-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--neon-purple);
            margin-bottom: 10px;
            font-family: 'Orbitron', monospace;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .achievement {
            background: var(--glass-bg);
            border: 1px solid rgba(255, 193, 7, 0.3);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            backdrop-filter: blur(15px);
            transition: all 0.3s ease;
        }

        .achievement.unlocked {
            border-color: var(--neon-yellow);
            box-shadow: 0 0 20px rgba(255, 193, 7, 0.3);
        }

        .achievement.locked {
            opacity: 0.5;
            filter: grayscale(100%);
        }

        .achievement-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .achievement-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--neon-yellow);
            margin-bottom: 10px;
        }

        .achievement-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Loading and Toast styles (keeping existing) */
        .loading {
            display: none;
            align-items: center;
            justify-content: center;
            gap: 15px;
            color: var(--neon-purple);
            font-weight: 600;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            padding: 20px 30px;
            border-radius: 15px;
            border: 1px solid rgba(138, 43, 226, 0.3);
        }

        .spinner {
            width: 25px;
            height: 25px;
            border: 3px solid rgba(138, 43, 226, 0.2);
            border-top: 3px solid var(--neon-purple);
            border-radius: 50%;
            animation: neuralSpin 1s linear infinite;
        }

        @keyframes neuralSpin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .toast {
            position: fixed;
            top: 30px;
            right: 30px;
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.9), rgba(138, 43, 226, 0.9));
            color: var(--dark-bg);
            padding: 15px 25px;
            border-radius: 15px;
            border: 1px solid rgba(0, 255, 255, 0.3);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transform: translateX(400px);
            transition: transform 0.4s ease;
            z-index: 2000;
            font-weight: 600;
            backdrop-filter: blur(10px);
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.error {
            background: linear-gradient(135deg, rgba(255, 68, 68, 0.9), rgba(255, 20, 147, 0.9));
        }

        .toast.success {
            background: linear-gradient(135deg, rgba(0, 255, 65, 0.9), rgba(0, 255, 255, 0.9));
        }

        .toast.warning {
            background: linear-gradient(135deg, rgba(255, 165, 0, 0.9), rgba(255, 20, 147, 0.9));
        }

        /* Back button */
        .back-btn {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(0, 255, 255, 0.1));
            border: 2px solid rgba(0, 255, 255, 0.3);
            color: var(--neon-cyan);
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 30px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            transform: translateY(-2px);
            border-color: var(--neon-cyan);
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.3);
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .logo {
                font-size: 2.2rem;
            }

            .subtitle {
                font-size: 1rem;
            }

            .nav-menu {
                gap: 10px;
            }

            .nav-btn {
                padding: 12px 18px;
                font-size: 0.9rem;
            }

            .learning-categories {
                grid-template-columns: 1fr;
            }

            .quiz-options {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(45deg, var(--neon-cyan), var(--neon-purple));
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(45deg, var(--neon-purple), var(--neon-pink));
        }
    </style>
</head>

<body>
    <div class="app-container">
        <button class="voice-btn" id="voiceBtn" title="Neural Voice Recognition">üé§</button>

        <div class="header">
            <div class="logo">TRANSLINGO</div>
            <div class="subtitle">Neural Language Learning Platform By Samar</div>
        </div>

        <!-- Navigation Menu -->
        <div class="nav-menu">
            <button class="nav-btn active" id="translateBtn" onclick="showScreen('translate')">
                üîÑ Translate
            </button>
            <button class="nav-btn" id="learnBtn" onclick="showScreen('learn')">
                 Learn üìö
            </button>
            <button class="nav-btn" id="testBtn" onclick="showScreen('test')">
                 Test üìù
            </button>
            <button class="nav-btn" id="performanceBtn" onclick="showScreen('performance')">
                 Performance üìä
            </button>
        </div>

        <!-- Translation Screen -->
        <div class="screen active" id="translateScreen">
            <div class="language-selector">
                <div class="language-dropdown">
                    <button class="language-btn" id="fromLang">
                        üá∫üá∏ English
                        <span>‚ñº</span>
                    </button>
                    <div class="dropdown" id="fromDropdown"></div>
                </div>

                <button class="swap-btn" id="swapBtn">‚áÑ</button>

                <div class="language-dropdown">
                    <button class="language-btn" id="toLang">
                        üáµüá∞ Urdu
                        <span>‚ñº</span>
                    </button>
                    <div class="dropdown" id="toDropdown"></div>
                </div>
            </div>

            <div class="translation-container">
                <div class="input-section">
                    <div class="section-label">‚ö° Input Text</div>
                    <textarea class="input-textarea" id="inputText"
                        placeholder="Enter quantum data for neural processing..." maxlength="5000"></textarea>
                    <div class="char-count" id="charCount">0/5000</div>
                </div>

                <div class="output-section">
                    <div class="section-label">üîÄ Translated Text</div>
                    <div class="output-text" id="outputText">Quantum translation matrix awaiting input...</div>
                    <div class="loading" id="loading">
                        <div class="spinner"></div>
                        Processing neural patterns...
                    </div>
                </div>
            </div>

            <div class="features">
                <button class="feature-btn" id="detectBtn">üß† Auto-Detect Language</button>
                <button class="feature-btn" id="copyBtn">üì° Copy Output</button>
                <button class="feature-btn" id="speakBtn">üîä Audio Synthesis</button>
                <button class="feature-btn" id="historyToggle">üóÇÔ∏è Translation History</button>
            </div>
        </div>

        <!-- Learning Screen -->
        <div class="screen" id="learnScreen">
            <div class="learning-categories">
                <div class="category-card" onclick="showLessons('vocabulary')">
                    <div class="category-icon">üìù</div>
                    <div class="category-title">Vocabulary</div>
                    <div class="category-description">Build your word arsenal with neural-enhanced vocabulary training
                    </div>
                    <div class="category-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 65%"></div>
                        </div>
                        <div class="progress-text">65% Neural Integration Complete</div>
                    </div>
                </div>

                <div class="category-card" onclick="showLessons('grammar')">
                    <div class="category-icon">‚öôÔ∏è</div>
                    <div class="category-title">Grammar</div>
                    <div class="category-description">Master language structure with quantum grammar algorithms</div>
                    <div class="category-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 45%"></div>
                        </div>
                        <div class="progress-text">45% Neural Integration Complete</div>
                    </div>
                </div>

                <div class="category-card" onclick="showLessons('pronunciation')">
                    <div class="category-icon">üéµ</div>
                    <div class="category-title">Pronunciation</div>
                    <div class="category-description">Perfect your accent with AI-powered phonetic training</div>
                    <div class="category-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 30%"></div>
                        </div>
                        <div class="progress-text">30% Neural Integration Complete</div>
                    </div>
                </div>

                <div class="category-card" onclick="showLessons('conversation')">
                    <div class="category-icon">üí¨</div>
                    <div class="category-title">Conversation</div>
                    <div class="category-description">Engage in neural conversations with AI language partners</div>
                    <div class="category-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 55%"></div>
                        </div>
                        <div class="progress-text">55% Neural Integration Complete</div>
                    </div>
                </div>

                <div class="category-card" onclick="showLessons('culture')">
                    <div class="category-icon">üåç</div>
                    <div class="category-title">Culture</div>
                    <div class="category-description">Understand cultural contexts with quantum cultural matrices</div>
                    <div class="category-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 25%"></div>
                        </div>
                        <div class="progress-text">25% Neural Integration Complete</div>
                    </div>
                </div>

                <div class="category-card" onclick="showLessons('writing')">
                    <div class="category-icon">‚úçÔ∏è</div>
                    <div class="category-title">Writing</div>
                    <div class="category-description">Develop writing skills with neural composition algorithms</div>
                    <div class="category-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 40%"></div>
                        </div>
                        <div class="progress-text">40% Neural Integration Complete</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lessons Screen -->
        <div class="screen" id="lessonsScreen">
            <button class="back-btn" onclick="showScreen('learn')">‚Üê Back to Categories</button>
            <div class="lessons-list" id="lessonsList"></div>
        </div>

        <!-- Test Screen -->
        <div class="screen" id="testScreen">
            <div class="test-categories">
                <div class="test-card" onclick="startQuiz('vocabulary')">
                    <div class="test-icon">üìù</div>
                    <div class="test-title">Vocabulary Test</div>
                    <div class="test-description">Test your word knowledge with neural-enhanced questions</div>
                </div>

                <div class="test-card" onclick="startQuiz('grammar')">
                    <div class="test-icon">‚öôÔ∏è</div>
                    <div class="test-title">Grammar Test</div>
                    <div class="test-description">Challenge your grammar skills with quantum assessments</div>
                </div>

                <div class="test-card" onclick="startQuiz('translation')">
                    <div class="test-icon">üîÑ</div>
                    <div class="test-title">Translation Test</div>
                    <div class="test-description">Test translation accuracy with AI-powered evaluation</div>
                </div>

                <div class="test-card" onclick="startQuiz('listening')">
                    <div class="test-icon">üëÇ</div>
                    <div class="test-title">Listening Test</div>
                    <div class="test-description">Assess comprehension with neural audio processing</div>
                </div>

                <div class="test-card" onclick="startQuiz('mixed')">
                    <div class="test-icon">üß©</div>
                    <div class="test-title">Mixed Test</div>
                    <div class="test-description">Comprehensive assessment across all skill areas</div>
                </div>

                <div class="test-card" onclick="startQuiz('speed')">
                    <div class="test-icon">‚ö°</div>
                    <div class="test-title">Speed Test</div>
                    <div class="test-description">Rapid-fire questions to test neural processing speed</div>
                </div>
            </div>
        </div>

        <!-- Quiz Screen -->
        <div class="screen" id="quizScreen">
            <div class="quiz-container">
                <button class="back-btn" onclick="showScreen('test')">‚Üê Back to Tests</button>

                <div class="quiz-header">
                    <div class="quiz-progress">
                        <div class="quiz-progress-fill" id="quizProgress"></div>
                    </div>
                    <div id="questionCounter">Question 1 of 10</div>
                </div>

                <div class="quiz-question">
                    <div class="question-text" id="questionText">Loading neural patterns...</div>
                    <div class="quiz-options" id="quizOptions"></div>
                </div>

                <div class="quiz-controls">
                    <button class="quiz-btn" id="nextBtn" onclick="nextQuestion()" disabled>Next Question</button>
                    <button class="quiz-btn" id="finishBtn" onclick="finishQuiz()" style="display: none;">Finish
                        Test</button>
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div class="screen" id="resultsScreen">
            <div class="quiz-container">
                <button class="back-btn" onclick="showScreen('test')">‚Üê Back to Tests</button>

                <div class="quiz-header">
                    <h2 style="color: var(--neon-cyan); margin-bottom: 30px;">Neural Assessment Complete</h2>
                </div>

                <div class="stats-grid" id="resultsStats"></div>

                <div class="quiz-controls" style="margin-top: 30px;">
                    <button class="quiz-btn" onclick="showScreen('test')">Take Another Test</button>
                    <button class="quiz-btn" onclick="showScreen('performance')">View Performance</button>
                </div>
            </div>
        </div>

        <!-- Performance Screen -->
        <div class="screen" id="performanceScreen">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üéØ</div>
                    <div class="stat-value" id="overallAccuracy">87%</div>
                    <div class="stat-label">Overall Accuracy</div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">üìà</div>
                    <div class="stat-value" id="testsCompleted">23</div>
                    <div class="stat-label">Tests Completed</div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">‚ö°</div>
                    <div class="stat-value" id="averageSpeed">2.3s</div>
                    <div class="stat-label">Avg Response Time</div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">üî•</div>
                    <div class="stat-value" id="currentStreak">12</div>
                    <div class="stat-label">Current Streak</div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">üìö</div>
                    <div class="stat-value" id="wordsLearned">1,247</div>
                    <div class="stat-label">Words Learned</div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">üèÜ</div>
                    <div class="stat-value" id="level">15</div>
                    <div class="stat-label">Neural Level</div>
                </div>
            </div>

            <div class="achievements-grid">
                <div class="achievement unlocked">
                    <div class="achievement-icon">üéâ</div>
                    <div class="achievement-title">First Steps</div>
                    <div class="achievement-description">Complete your first lesson</div>
                </div>

                <div class="achievement unlocked">
                    <div class="achievement-icon">üíØ</div>
                    <div class="achievement-title">Perfect Score</div>
                    <div class="achievement-description">Get 100% on any test</div>
                </div>

                <div class="achievement unlocked">
                    <div class="achievement-icon">‚ö°</div>
                    <div class="achievement-title">Speed Demon</div>
                    <div class="achievement-description">Complete 10 questions in under 30 seconds</div>
                </div>

                <div class="achievement unlocked">
                    <div class="achievement-icon">üî•</div>
                    <div class="achievement-title">On Fire</div>
                    <div class="achievement-description">Maintain a 10-day streak</div>
                </div>

                <div class="achievement locked">
                    <div class="achievement-icon">üèÜ</div>
                    <div class="achievement-title">Neural Master</div>
                    <div class="achievement-description">Complete 100 lessons</div>
                </div>

                <div class="achievement locked">
                    <div class="achievement-icon">üåü</div>
                    <div class="achievement-title">Polyglot</div>
                    <div class="achievement-description">Learn 5 different languages</div>
                </div>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <script>
        // Language data (keeping the existing comprehensive list)
        const languages = [
            { code: 'af', name: 'Afrikaans', flag: 'üáøüá¶' },
            { code: 'sq', name: 'Albanian', flag: 'üá¶üá±' },
            { code: 'am', name: 'Amharic', flag: 'üá™üáπ' },
            { code: 'ar', name: 'Arabic', flag: 'üá∏üá¶' },
            { code: 'hy', name: 'Armenian', flag: 'üá¶üá≤' },
            { code: 'az', name: 'Azerbaijani', flag: 'üá¶üáø' },
            { code: 'eu', name: 'Basque', flag: 'üè¥' },
            { code: 'be', name: 'Belarusian', flag: 'üáßüáæ' },
            { code: 'bn', name: 'Bengali', flag: 'üáßüá©' },
            { code: 'bs', name: 'Bosnian', flag: 'üáßüá¶' },
            { code: 'bg', name: 'Bulgarian', flag: 'üáßüá¨' },
            { code: 'ca', name: 'Catalan', flag: 'üè¥' },
            { code: 'zh', name: 'Chinese Simplified', flag: 'üá®üá≥' },
            { code: 'zh-tw', name: 'Chinese Traditional', flag: 'üáπüáº' },
            { code: 'hr', name: 'Croatian', flag: 'üá≠üá∑' },
            { code: 'cs', name: 'Czech', flag: 'üá®üáø' },
            { code: 'da', name: 'Danish', flag: 'üá©üá∞' },
            { code: 'nl', name: 'Dutch', flag: 'üá≥üá±' },
            { code: 'en', name: 'English', flag: 'üá∫üá∏' },
            { code: 'eo', name: 'Esperanto', flag: 'üåç' },
            { code: 'et', name: 'Estonian', flag: 'üá™üá™' },
            { code: 'tl', name: 'Filipino', flag: 'üáµüá≠' },
            { code: 'fi', name: 'Finnish', flag: 'üá´üáÆ' },
            { code: 'fr', name: 'French', flag: 'üá´üá∑' },
            { code: 'gl', name: 'Galician', flag: 'üè¥' },
            { code: 'ka', name: 'Georgian', flag: 'üá¨üá™' },
            { code: 'de', name: 'German', flag: 'üá©üá™' },
            { code: 'el', name: 'Greek', flag: 'üá¨üá∑' },
            { code: 'gu', name: 'Gujarati', flag: 'üáÆüá≥' },
            { code: 'ht', name: 'Haitian Creole', flag: 'üá≠üáπ' },
            { code: 'he', name: 'Hebrew', flag: 'üáÆüá±' },
            { code: 'hi', name: 'Hindi', flag: 'üáÆüá≥' },
            { code: 'hu', name: 'Hungarian', flag: 'üá≠üá∫' },
            { code: 'is', name: 'Icelandic', flag: 'üáÆüá∏' },
            { code: 'id', name: 'Indonesian', flag: 'üáÆüá©' },
            { code: 'ga', name: 'Irish', flag: 'üáÆüá™' },
            { code: 'it', name: 'Italian', flag: 'üáÆüáπ' },
            { code: 'ja', name: 'Japanese', flag: 'üáØüáµ' },
            { code: 'ko', name: 'Korean', flag: 'üá∞üá∑' },
            { code: 'ku', name: 'Kurdish', flag: 'üè¥' },
            { code: 'lv', name: 'Latvian', flag: 'üá±üáª' },
            { code: 'lt', name: 'Lithuanian', flag: 'üá±üáπ' },
            { code: 'mk', name: 'Macedonian', flag: 'üá≤üá∞' },
            { code: 'ms', name: 'Malay', flag: 'üá≤üáæ' },
            { code: 'mt', name: 'Maltese', flag: 'üá≤üáπ' },
            { code: 'mi', name: 'Maori', flag: 'üá≥üáø' },
            { code: 'mr', name: 'Marathi', flag: 'üáÆüá≥' },
            { code: 'mn', name: 'Mongolian', flag: 'üá≤üá≥' },
            { code: 'my', name: 'Myanmar (Burmese)', flag: 'üá≤üá≤' },
            { code: 'ne', name: 'Nepali', flag: 'üá≥üáµ' },
            { code: 'no', name: 'Norwegian', flag: 'üá≥üá¥' },
            { code: 'fa', name: 'Persian', flag: 'üáÆüá∑' },
            { code: 'pl', name: 'Polish', flag: 'üáµüá±' },
            { code: 'pt', name: 'Portuguese', flag: 'üáµüáπ' },
            { code: 'pa', name: 'Punjabi', flag: 'üáÆüá≥' },
            { code: 'ro', name: 'Romanian', flag: 'üá∑üá¥' },
            { code: 'ru', name: 'Russian', flag: 'üá∑üá∫' },
            { code: 'sr', name: 'Serbian', flag: 'üá∑üá∏' },
            { code: 'si', name: 'Sinhala', flag: 'üá±üá∞' },
            { code: 'sk', name: 'Slovak', flag: 'üá∏üá∞' },
            { code: 'sl', name: 'Slovenian', flag: 'üá∏üáÆ' },
            { code: 'so', name: 'Somali', flag: 'üá∏üá¥' },
            { code: 'es', name: 'Spanish', flag: 'üá™üá∏' },
            { code: 'sw', name: 'Swahili', flag: 'üáπüáø' },
            { code: 'sv', name: 'Swedish', flag: 'üá∏üá™' },
            { code: 'ta', name: 'Tamil', flag: 'üáÆüá≥' },
            { code: 'te', name: 'Telugu', flag: 'üáÆüá≥' },
            { code: 'th', name: 'Thai', flag: 'üáπüá≠' },
            { code: 'tr', name: 'Turkish', flag: 'üáπüá∑' },
            { code: 'uk', name: 'Ukrainian', flag: 'üá∫üá¶' },
            { code: 'ur', name: 'Urdu', flag: 'üáµüá∞' },
            { code: 'vi', name: 'Vietnamese', flag: 'üáªüá≥' },
            { code: 'cy', name: 'Welsh', flag: 'üè¥Û†ÅßÛ†Å¢Û†Å∑Û†Å¨Û†Å≥Û†Åø' },
            { code: 'yi', name: 'Yiddish', flag: 'üïç' },
            { code: 'yo', name: 'Yoruba', flag: 'üá≥üá¨' },
            { code: 'zu', name: 'Zulu', flag: 'üáøüá¶' }
        ];

        // App state
        let fromLanguage = 'en';
        let toLanguage = 'ur';
        let currentScreen = 'translate';
        let currentQuiz = null;
        let currentQuestionIndex = 0;
        let quizScore = 0;
        let userStats = {
            testsCompleted: 23,
            overallAccuracy: 87,
            averageSpeed: 2.3,
            currentStreak: 12,
            wordsLearned: 1247,
            level: 15
        };

        // Lesson data
        const lessonData = {
            vocabulary: [
                { title: "Basic Greetings", difficulty: "beginner", description: "Learn essential greeting words and phrases", duration: "15 min", completed: true },
                { title: "Family Members", difficulty: "beginner", description: "Master family relationship terminology", duration: "20 min", completed: true },
                { title: "Colors and Numbers", difficulty: "beginner", description: "Basic colors and counting from 1-100", duration: "25 min", completed: false },
                { title: "Food and Drinks", difficulty: "intermediate", description: "Restaurant vocabulary and cooking terms", duration: "30 min", completed: false },
                { title: "Travel and Transport", difficulty: "intermediate", description: "Navigate travel situations confidently", duration: "35 min", completed: false },
                { title: "Business Terminology", difficulty: "advanced", description: "Professional vocabulary for workplace", duration: "40 min", completed: false }
            ],
            grammar: [
                { title: "Present Tense Basics", difficulty: "beginner", description: "Master present tense conjugation", duration: "25 min", completed: true },
                { title: "Past Tense Forms", difficulty: "intermediate", description: "Regular and irregular past tense", duration: "30 min", completed: false },
                            { title: "Future Tense Mastery", difficulty: "intermediate", description: "Master future tense in all forms", duration: "28 min", completed: false },
                            { title: "Conditional Statements", difficulty: "advanced", description: "Complex conditional grammar structures", duration: "45 min", completed: false },
                            { title: "Subjunctive Mood", difficulty: "advanced", description: "Advanced subjunctive constructions", duration: "50 min", completed: false },
                            { title: "Complex Sentences", difficulty: "advanced", description: "Master complex sentence structures", duration: "60 min", completed: false }
                        ],
                        pronunciation: [
                            { title: "Vowel Sounds", difficulty: "beginner", description: "Master basic vowel pronunciation", duration: "20 min", completed: false },
                            { title: "Consonant Clusters", difficulty: "intermediate", description: "Difficult consonant combinations", duration: "25 min", completed: false },
                            { title: "Stress Patterns", difficulty: "intermediate", description: "Word and sentence stress rules", duration: "30 min", completed: false },
                            { title: "Intonation Patterns", difficulty: "advanced", description: "Natural speech rhythm and melody", duration: "35 min", completed: false }
                        ],
                        conversation: [
                            { title: "Small Talk Basics", difficulty: "beginner", description: "Casual conversation starters", duration: "25 min", completed: true },
                            { title: "Ordering Food", difficulty: "beginner", description: "Restaurant conversation skills", duration: "30 min", completed: false },
                            { title: "Job Interviews", difficulty: "intermediate", description: "Professional interview preparation", duration: "40 min", completed: false },
                            { title: "Debate Skills", difficulty: "advanced", description: "Advanced argumentation techniques", duration: "50 min", completed: false }
                        ],
                        culture: [
                            { title: "Cultural Etiquette", difficulty: "beginner", description: "Basic cultural norms and customs", duration: "30 min", completed: false },
                            { title: "Festivals and Traditions", difficulty: "intermediate", description: "Traditional celebrations and customs", duration: "35 min", completed: false },
                            { title: "Historical Context", difficulty: "advanced", description: "Language evolution and history", duration: "45 min", completed: false }
                        ],
                        writing: [
                            { title: "Basic Writing Skills", difficulty: "beginner", description: "Fundamental writing techniques", duration: "35 min", completed: false },
                            { title: "Formal Letters", difficulty: "intermediate", description: "Business and formal correspondence", duration: "40 min", completed: false },
                            { title: "Creative Writing", difficulty: "advanced", description: "Express creativity through writing", duration: "60 min", completed: false }
                        ]
                    };

                    // Quiz questions data
                    const quizQuestions = {
                        vocabulary: [
                            {
                                question: "What does 'hello' mean in Urdu?",
                                options: ["Salam", "Shukriya", "Maaf kijiye", "Alvida"],
                                correct: 0
                            },
                            {
                                question: "Which word means 'water' in Spanish?",
                                options: ["Fuego", "Agua", "Tierra", "Aire"],
                                correct: 1
                            },
                            {
                                question: "How do you say 'thank you' in French?",
                                options: ["Bonjour", "Merci", "Au revoir", "Excusez-moi"],
                                correct: 1
                            },
                            {
                                question: "What is the German word for 'book'?",
                                options: ["Haus", "Buch", "Auto", "Baum"],
                                correct: 1
                            },
                            {
                                question: "Which means 'good morning' in Italian?",
                                options: ["Buona sera", "Buona notte", "Buongiorno", "Ciao"],
                                correct: 2
                            }
                        ],
                        grammar: [
                            {
                                question: "Which sentence uses correct present tense?",
                                options: ["I am go to school", "I goes to school", "I go to school", "I going to school"],
                                correct: 2
                            },
                            {
                                question: "What is the past tense of 'run'?",
                                options: ["Runned", "Ran", "Running", "Runs"],
                                correct: 1
                            },
                            {
                                question: "Choose the correct plural form:",
                                options: ["Childs", "Childes", "Children", "Childs'"],
                                correct: 2
                            },
                            {
                                question: "Which is the correct possessive form?",
                                options: ["Johns car", "John's car", "Johns' car", "John car"],
                                correct: 1
                            },
                            {
                                question: "Select the proper conditional statement:",
                                options: ["If I will see him", "If I would see him", "If I see him", "If I seeing him"],
                                correct: 2
                            }
                        ],
                        translation: [
                            {
                                question: "Translate: 'The cat is sleeping'",
                                options: ["El gato est√° durmiendo", "El gato come pescado", "El gato es grande", "El gato est√° corriendo"],
                                correct: 0
                            },
                            {
                                question: "What does 'Je mange une pomme' mean?",
                                options: ["I drink water", "I eat an apple", "I see a tree", "I have a car"],
                                correct: 1
                            },
                            {
                                question: "Translate to German: 'I am learning'",
                                options: ["Ich bin lernen", "Ich lerne", "Ich lernte", "Ich werde lernen"],
                                correct: 1
                            },
                            {
                                question: "What is 'Arigato gozaimasu' in English?",
                                options: ["Good morning", "Thank you very much", "Excuse me", "Good night"],
                                correct: 1
                            },
                            {
                                question: "Translate: 'Where is the library?'",
                                options: ["¬øC√≥mo est√° usted?", "¬øD√≥nde est√° la biblioteca?", "¬øQu√© hora es?", "¬øCu√°nto cuesta?"],
                                correct: 1
                            }
                        ],
                        listening: [
                            {
                                question: "Listen carefully: Which word rhymes with 'cat'?",
                                options: ["Dog", "Hat", "Bird", "Fish"],
                                correct: 1
                            },
                            {
                                question: "Which syllable is stressed in 'computer'?",
                                options: ["com-", "-pu-", "-ter", "All equal"],
                                correct: 1
                            },
                            {
                                question: "Identify the correct pronunciation pattern:",
                                options: ["Rising tone", "Falling tone", "Flat tone", "Rising-falling"],
                                correct: 3
                            },
                            {
                                question: "Which word has the /Œ∏/ sound?",
                                options: ["Think", "Sink", "Drink", "Link"],
                                correct: 0
                            },
                            {
                                question: "Count the syllables in 'education':",
                                options: ["3", "4", "5", "6"],
                                correct: 1
                            }
                        ],
                        mixed: [
                            {
                                question: "Choose the grammatically correct sentence:",
                                options: ["She don't like coffee", "She doesn't likes coffee", "She doesn't like coffee", "She not like coffee"],
                                correct: 2
                            },
                            {
                                question: "What does 'biblioteca' mean in Spanish?",
                                options: ["Hospital", "Library", "School", "Restaurant"],
                                correct: 1
                            },
                            {
                                question: "Which prefix means 'not' or 'opposite'?",
                                options: ["Pre-", "Un-", "Re-", "Sub-"],
                                correct: 1
                            },
                            {
                                question: "Identify the verb tense: 'I will have eaten'",
                                options: ["Future simple", "Future perfect", "Present perfect", "Past perfect"],
                                correct: 1
                            },
                            {
                                question: "Choose the correct article: '__ university'",
                                options: ["A", "An", "The", "No article needed"],
                                correct: 0
                            }
                        ],
                        speed: [
                            {
                                question: "Quick! 2+2=?",
                                options: ["3", "4", "5", "6"],
                                correct: 1
                            },
                            {
                                question: "Capital of France?",
                                options: ["London", "Berlin", "Paris", "Madrid"],
                                correct: 2
                            },
                            {
                                question: "Color of grass?",
                                options: ["Blue", "Green", "Red", "Yellow"],
                                correct: 1
                            },
                            {
                                question: "Days in a week?",
                                options: ["6", "7", "8", "9"],
                                correct: 1
                            },
                            {
                                question: "Opposite of 'hot'?",
                                options: ["Warm", "Cool", "Cold", "Mild"],
                                correct: 2
                            }
                        ]
                    };

                    // Initialize app
                    document.addEventListener('DOMContentLoaded', function () {
                        initializeLanguageDropdowns();
                        initializeEventListeners();
                        updateCharCount();
                        updateStats();

                        // Load voices for speech synthesis when available
                        if ('speechSynthesis' in window) {
                            // Load voices initially
                            speechSynthesis.getVoices();

                            // Reload voices when they change (some browsers load them asynchronously)
                            speechSynthesis.addEventListener('voiceschanged', function () {
                                console.log('Voices loaded:', speechSynthesis.getVoices().length);
                            });
                        }

                        // Show welcome message
                        setTimeout(() => {
                            showToast('üöÄ TransLingo Neural Platform Initialized! Ready for quantum translations.', 'success');
                        }, 1000);
                    });

                    function initializeLanguageDropdowns() {
                        const fromDropdown = document.getElementById('fromDropdown');
                        const toDropdown = document.getElementById('toDropdown');

                        languages.forEach(lang => {
                            const fromItem = document.createElement('div');
                            fromItem.className = 'dropdown-item';
                            fromItem.innerHTML = `${lang.flag} ${lang.name}`;
                            fromItem.onclick = () => selectLanguage('from', lang.code, lang.name, lang.flag);
                            fromDropdown.appendChild(fromItem);

                            const toItem = document.createElement('div');
                            toItem.className = 'dropdown-item';
                            toItem.innerHTML = `${lang.flag} ${lang.name}`;
                            toItem.onclick = () => selectLanguage('to', lang.code, lang.name, lang.flag);
                            toDropdown.appendChild(toItem);
                        });
                    }

                    function initializeEventListeners() {
                        // Language dropdown toggles
                        document.getElementById('fromLang').addEventListener('click', () => toggleDropdown('fromDropdown'));
                        document.getElementById('toLang').addEventListener('click', () => toggleDropdown('toDropdown'));

                        // Swap languages
                        document.getElementById('swapBtn').addEventListener('click', swapLanguages);

                        // Input text area
                        document.getElementById('inputText').addEventListener('input', handleInputChange);

                        // Feature buttons
                        document.getElementById('detectBtn').addEventListener('click', autoDetectLanguage);
                        document.getElementById('copyBtn').addEventListener('click', copyOutput);
                        document.getElementById('speakBtn').addEventListener('click', speakOutput);
                        document.getElementById('historyToggle').addEventListener('click', toggleHistory);

                        // Voice recognition
                        document.getElementById('voiceBtn').addEventListener('click', toggleVoiceRecognition);

                        // Close dropdowns when clicking outside
                        document.addEventListener('click', function (e) {
                            if (!e.target.closest('.language-dropdown')) {
                                closeAllDropdowns();
                            }
                        });
                    }

                    // Screen navigation
                    function showScreen(screenName) {
                        // Hide all screens
                        document.querySelectorAll('.screen').forEach(screen => {
                            screen.classList.remove('active');
                        });

                        // Show selected screen
                        document.getElementById(screenName + 'Screen').classList.add('active');

                        // Update navigation buttons
                        document.querySelectorAll('.nav-btn').forEach(btn => {
                            btn.classList.remove('active');
                        });
                        document.getElementById(screenName + 'Btn').classList.add('active');

                        currentScreen = screenName;
                    }

                    // Language selection functions
                    function toggleDropdown(dropdownId) {
                        const dropdown = document.getElementById(dropdownId);
                        const isVisible = dropdown.classList.contains('show');

                        closeAllDropdowns();

                        if (!isVisible) {
                            dropdown.classList.add('show');
                        }
                    }

                    function closeAllDropdowns() {
                        document.querySelectorAll('.dropdown').forEach(dropdown => {
                            dropdown.classList.remove('show');
                        });
                    }

                    function selectLanguage(type, code, name, flag) {
                        if (type === 'from') {
                            fromLanguage = code;
                            document.getElementById('fromLang').innerHTML = `${flag} ${name} <span>‚ñº</span>`;
                        } else {
                            toLanguage = code;
                            document.getElementById('toLang').innerHTML = `${flag} ${name} <span>‚ñº</span>`;
                        }
                        closeAllDropdowns();
                        translateText();
                    }

                    function swapLanguages() {
                        const fromBtn = document.getElementById('fromLang');
                        const toBtn = document.getElementById('toLang');
                        const inputText = document.getElementById('inputText').value;
                        const outputText = document.getElementById('outputText').textContent;

                        // Swap button contents
                        const tempFrom = fromBtn.innerHTML;
                        fromBtn.innerHTML = toBtn.innerHTML;
                        toBtn.innerHTML = tempFrom;

                        // Swap language codes
                        const tempLang = fromLanguage;
                        fromLanguage = toLanguage;
                        toLanguage = tempLang;

                        // Swap text content
                        document.getElementById('inputText').value = outputText === 'Quantum translation matrix awaiting input...' ? '' : outputText;
                        document.getElementById('outputText').textContent = inputText || 'Quantum translation matrix awaiting input...';

                        updateCharCount();
                        translateText();
                    }

                    // Translation functions
                    function handleInputChange() {
                        updateCharCount();
                        debounce(translateText, 300)();
                    }

                    function updateCharCount() {
                        const input = document.getElementById('inputText');
                        const charCount = document.getElementById('charCount');
                        charCount.textContent = `${input.value.length}/5000`;
                    }

                    async function translateText() {
                        const inputText = document.getElementById('inputText').value.trim();
                        const outputElement = document.getElementById('outputText');
                        const loadingElement = document.getElementById('loading');

                        if (!inputText) {
                            outputElement.textContent = 'Quantum translation matrix awaiting input...';
                            return;
                        }

                        // Show loading
                        loadingElement.style.display = 'flex';
                        outputElement.style.opacity = '0.5';

                        try {
                            // Use Google Translate API (free tier)
                            const translatedText = await getTranslation(inputText, fromLanguage, toLanguage);
                            outputElement.textContent = translatedText;
                            outputElement.style.opacity = '1';
                            loadingElement.style.display = 'none';
                            showToast('Neural translation complete! üß†', 'success');
                        } catch (error) {
                            console.error('Translation error:', error);
                            // Fallback to local translation
                            const translatedText = getLocalTranslation(inputText, fromLanguage, toLanguage);
                            outputElement.textContent = translatedText;
                            outputElement.style.opacity = '1';
                            loadingElement.style.display = 'none';
                            showToast('Using local translation matrix üîß', 'warning');
                        }
                    }

                    async function getTranslation(text, fromLang, toLang) {
                        // Using MyMemory Translation API (free)
                        const response = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=${fromLang}|${toLang}`);
                        const data = await response.json();

                        if (data.responseStatus === 200) {
                            return data.responseData.translatedText;
                        } else {
                            throw new Error('Translation API failed');
                        }
                    }

                    function getLocalTranslation(text, fromLang, toLang) {
                        // Enhanced local translation dictionary
                        const translations = {
                            'en-ur': {
                                'hello': 'ÿ≥ŸÑÿßŸÖ ÿπŸÑ€å⁄©ŸÖ',
                                'hi': 'ÿ≥ŸÑÿßŸÖ',
                                'goodbye': 'ÿßŸÑŸàÿØÿßÿπ',
                                'thank you': 'ÿ¥⁄©ÿ±€å€Å',
                                'thanks': 'ÿ¥⁄©ÿ±€å€Å',
                                'please': 'ŸÖ€Åÿ±ÿ®ÿßŸÜ€å ÿ≥€í',
                                'yes': '€Åÿß⁄∫',
                                'no': 'ŸÜ€Å€å⁄∫',
                                'water': 'ŸæÿßŸÜ€å',
                                'food': '⁄©⁄æÿßŸÜÿß',
                                'house': '⁄Ø⁄æÿ±',
                                'book': '⁄©ÿ™ÿßÿ®',
                                'school': 'ÿßÿ≥⁄©ŸàŸÑ',
                                'car': '⁄Øÿß⁄ë€å',
                                'love': 'ŸÖÿ≠ÿ®ÿ™',
                                'friend': 'ÿØŸàÿ≥ÿ™',
                                'family': 'ÿÆÿßŸÜÿØÿßŸÜ',
                                'time': 'ŸàŸÇÿ™',
                                'money': 'Ÿæ€åÿ≥€Å',
                                'work': '⁄©ÿßŸÖ',
                                'good': 'ÿß⁄Ü⁄æÿß',
                                'bad': 'ÿ®ÿ±ÿß',
                                'big': 'ÿ®⁄ëÿß',
                                'small': '⁄Ü⁄æŸàŸπÿß',
                                'beautiful': 'ÿÆŸàÿ®ÿµŸàÿ±ÿ™',
                                'how are you': 'ÿ¢Ÿæ ⁄©€åÿ≥€í €Å€å⁄∫',
                                'what is your name': 'ÿ¢Ÿæ ⁄©ÿß ŸÜÿßŸÖ ⁄©€åÿß €Å€í',
                                'where are you from': 'ÿ¢Ÿæ ⁄©€Åÿß⁄∫ ÿ≥€í €Å€å⁄∫',
                                'i love you': 'ŸÖ€å⁄∫ ÿ™ŸÖ ÿ≥€í ŸÖÿ≠ÿ®ÿ™ ⁄©ÿ±ÿ™ÿß €ÅŸà⁄∫',
                                'good morning': 'ÿµÿ®ÿ≠ ÿ®ÿÆ€åÿ±',
                                'good night': 'ÿ¥ÿ® ÿ®ÿÆ€åÿ±'
                            },
                            'en-es': {
                                'hello': 'hola',
                                'hi': 'hola',
                                'goodbye': 'adi√≥s',
                                'thank you': 'gracias',
                                'thanks': 'gracias',
                                'please': 'por favor',
                                'yes': 's√≠',
                                'no': 'no',
                                'water': 'agua',
                                'food': 'comida',
                                'house': 'casa',
                                'book': 'libro',
                                'school': 'escuela',
                                'car': 'coche',
                                'love': 'amor',
                                'friend': 'amigo',
                                'family': 'familia',
                                'time': 'tiempo',
                                'money': 'dinero',
                                'work': 'trabajo',
                                'good': 'bueno',
                                'bad': 'malo',
                                'big': 'grande',
                                'small': 'peque√±o',
                                'beautiful': 'hermoso',
                                'how are you': '¬øc√≥mo est√°s?',
                                'what is your name': '¬øc√≥mo te llamas?',
                                'where are you from': '¬øde d√≥nde eres?',
                                'i love you': 'te amo',
                                'good morning': 'buenos d√≠as',
                                'good night': 'buenas noches'
                            },
                            'en-fr': {
                                'hello': 'bonjour',
                                'hi': 'salut',
                                'goodbye': 'au revoir',
                                'thank you': 'merci',
                                'thanks': 'merci',
                                'please': 's\'il vous pla√Æt',
                                'yes': 'oui',
                                'no': 'non',
                                'water': 'eau',
                                'food': 'nourriture',
                                'house': 'maison',
                                'book': 'livre',
                                'school': '√©cole',
                                'car': 'voiture',
                                'love': 'amour',
                                'friend': 'ami',
                                'family': 'famille',
                                'time': 'temps',
                                'money': 'argent',
                                'work': 'travail',
                                'good': 'bon',
                                'bad': 'mauvais',
                                'big': 'grand',
                                'small': 'petit',
                                'beautiful': 'beau',
                                'how are you': 'comment allez-vous?',
                                'what is your name': 'comment vous appelez-vous?',
                                'where are you from': 'd\'o√π venez-vous?',
                                'i love you': 'je t\'aime',
                                'good morning': 'bonjour',
                                'good night': 'bonne nuit'
                            },
                            'en-de': {
                                'hello': 'hallo',
                                'hi': 'hi',
                                'goodbye': 'auf wiedersehen',
                                'thank you': 'danke',
                                'thanks': 'danke',
                                'please': 'bitte',
                                'yes': 'ja',
                                'no': 'nein',
                                'water': 'wasser',
                                'food': 'essen',
                                'house': 'haus',
                                'book': 'buch',
                                'school': 'schule',
                                'car': 'auto',
                                'love': 'liebe',
                                'friend': 'freund',
                                'family': 'familie',
                                'time': 'zeit',
                                'money': 'geld',
                                'work': 'arbeit',
                                'good': 'gut',
                                'bad': 'schlecht',
                                'big': 'gro√ü',
                                'small': 'klein',
                                'beautiful': 'sch√∂n',
                                'how are you': 'wie geht es dir?',
                                'what is your name': 'wie hei√üt du?',
                                'where are you from': 'woher kommst du?',
                                'i love you': 'ich liebe dich',
                                'good morning': 'guten morgen',
                                'good night': 'gute nacht'
                            }
                        };

                        const key = `${fromLang}-${toLang}`;
                        const lowerText = text.toLowerCase().trim();

                        // Check for exact matches first
                        if (translations[key] && translations[key][lowerText]) {
                            return translations[key][lowerText];
                        }

                        // Check for partial matches
                        if (translations[key]) {
                            for (const [key_phrase, translation] of Object.entries(translations[key])) {
                                if (lowerText.includes(key_phrase) || key_phrase.includes(lowerText)) {
                                    return translation;
                                }
                            }
                        }

                        // Check reverse translation
                        const reverseKey = `${toLang}-${fromLang}`;
                        if (translations[reverseKey]) {
                            for (const [translation, original] of Object.entries(translations[reverseKey])) {
                                if (lowerText === original.toLowerCase()) {
                                    return translation;
                                }
                            }
                        }

                        // If no translation found, return original text with note
                        return `${text} [Translation not available - try common words like 'hello', 'thank you', etc.]`;
                    }

                    // Feature functions
                    function autoDetectLanguage() {
                        const button = document.getElementById('detectBtn');
                        button.classList.add('active');
                        showToast('Neural language detection activated! üß†', 'success');

                        setTimeout(() => {
                            button.classList.remove('active');
                            showToast('Language auto-detected: English üá∫üá∏', 'info');
                        }, 2000);
                    }

                    function copyOutput() {
                        const outputText = document.getElementById('outputText').textContent;
                        if (outputText && outputText !== 'Quantum translation matrix awaiting input...') {
                            navigator.clipboard.writeText(outputText).then(() => {
                                showToast('Neural data extracted to clipboard! üì°', 'success');
                            });
                        }
                    }

                    function speakOutput() {
                        const outputText = document.getElementById('outputText').textContent;
                        if (outputText && outputText !== 'Quantum translation matrix awaiting input...' && !outputText.includes('[Translation not available')) {

                            // Check if speech synthesis is supported
                            if ('speechSynthesis' in window) {
                                // Cancel any ongoing speech
                                speechSynthesis.cancel();

                                const utterance = new SpeechSynthesisUtterance(outputText);

                                // Set language based on target language
                                const languageMap = {
                                    'en': 'en-US',
                                    'es': 'es-ES',
                                    'fr': 'fr-FR',
                                    'de': 'de-DE',
                                    'it': 'it-IT',
                                    'pt': 'pt-PT',
                                    'ru': 'ru-RU',
                                    'ja': 'ja-JP',
                                    'ko': 'ko-KR',
                                    'zh': 'zh-CN',
                                    'ar': 'ar-SA',
                                    'hi': 'hi-IN',
                                    'ur': 'ur-PK',
                                    'tr': 'tr-TR',
                                    'nl': 'nl-NL',
                                    'sv': 'sv-SE',
                                    'da': 'da-DK',
                                    'no': 'no-NO',
                                    'fi': 'fi-FI',
                                    'pl': 'pl-PL',
                                    'cs': 'cs-CZ',
                                    'hu': 'hu-HU',
                                    'ro': 'ro-RO',
                                    'bg': 'bg-BG',
                                    'hr': 'hr-HR',
                                    'sk': 'sk-SK',
                                    'sl': 'sl-SI',
                                    'et': 'et-EE',
                                    'lv': 'lv-LV',
                                    'lt': 'lt-LT',
                                    'el': 'el-GR',
                                    'he': 'he-IL',
                                    'th': 'th-TH',
                                    'vi': 'vi-VN',
                                    'id': 'id-ID',
                                    'ms': 'ms-MY',
                                    'tl': 'tl-PH',
                                    'sw': 'sw-KE',
                                    'af': 'af-ZA',
                                    'am': 'am-ET',
                                    'bn': 'bn-BD',
                                    'gu': 'gu-IN',
                                    'kn': 'kn-IN',
                                    'ml': 'ml-IN',
                                    'mr': 'mr-IN',
                                    'ne': 'ne-NP',
                                    'pa': 'pa-IN',
                                    'si': 'si-LK',
                                    'ta': 'ta-IN',
                                    'te': 'te-IN',
                                    'uk': 'uk-UA',
                                    'be': 'be-BY',
                                    'ka': 'ka-GE',
                                    'hy': 'hy-AM',
                                    'az': 'az-AZ',
                                    'kk': 'kk-KZ',
                                    'ky': 'ky-KG',
                                    'tg': 'tg-TJ',
                                    'uz': 'uz-UZ',
                                    'mn': 'mn-MN'
                                };

                                utterance.lang = languageMap[toLanguage] || 'en-US';
                                utterance.rate = 0.8;
                                utterance.pitch = 1.0;
                                utterance.volume = 1.0;

                                // Get available voices and try to find the best match
                                const voices = speechSynthesis.getVoices();
                                const targetLang = utterance.lang.split('-')[0];

                                // Find voice that matches the target language
                                const matchingVoice = voices.find(voice =>
                                    voice.lang.toLowerCase().startsWith(targetLang) ||
                                    voice.lang.toLowerCase().includes(targetLang)
                                );

                                if (matchingVoice) {
                                    utterance.voice = matchingVoice;
                                }

                                utterance.onstart = () => {
                                    showToast('Audio synthesis initiated! üîä', 'success');
                                    document.getElementById('speakBtn').classList.add('active');
                                };

                                utterance.onend = () => {
                                    document.getElementById('speakBtn').classList.remove('active');
                                    showToast('Audio synthesis complete! ‚úÖ', 'success');
                                };

                                utterance.onerror = (event) => {
                                    document.getElementById('speakBtn').classList.remove('active');
                                    showToast('Audio synthesis error: ' + event.error, 'error');
                                };

                                speechSynthesis.speak(utterance);
                            } else {
                                showToast('Speech synthesis not supported in this browser! ‚ùå', 'error');
                            }
                        } else {
                            showToast('No valid text to speak! Please translate some text first. üìù', 'warning');
                        }
                    }

                    function toggleHistory() {
                        const button = document.getElementById('historyToggle');
                        button.classList.toggle('active');
                        showToast('Memory bank access toggled! üóÇÔ∏è', 'info');
                    }

                    // Voice recognition
                    let isListening = false;
                    let recognition = null;

                    function toggleVoiceRecognition() {
                        const button = document.getElementById('voiceBtn');

                        if (!isListening) {
                            startVoiceRecognition();
                            button.style.background = 'linear-gradient(45deg, var(--neon-green), var(--neon-cyan))';
                            button.innerHTML = 'üî¥';
                            isListening = true;
                        } else {
                            stopVoiceRecognition();
                            button.style.background = 'linear-gradient(45deg, var(--neon-cyan), var(--neon-purple))';
                            button.innerHTML = 'üé§';
                            isListening = false;
                        }
                    }

                    function startVoiceRecognition() {
                        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                            recognition = new SpeechRecognition();

                            recognition.continuous = false;
                            recognition.interimResults = true;
                            recognition.maxAlternatives = 1;

                            // Set language for recognition
                            const recognitionLangMap = {
                                'en': 'en-US',
                                'es': 'es-ES',
                                'fr': 'fr-FR',
                                'de': 'de-DE',
                                'it': 'it-IT',
                                'pt': 'pt-PT',
                                'ru': 'ru-RU',
                                'ja': 'ja-JP',
                                'ko': 'ko-KR',
                                'zh': 'zh-CN',
                                'ar': 'ar-SA',
                                'hi': 'hi-IN',
                                'ur': 'ur-PK',
                                'tr': 'tr-TR',
                                'nl': 'nl-NL',
                                'sv': 'sv-SE',
                                'da': 'da-DK',
                                'no': 'no-NO',
                                'fi': 'fi-FI',
                                'pl': 'pl-PL',
                                'cs': 'cs-CZ',
                                'hu': 'hu-HU',
                                'ro': 'ro-RO',
                                'bg': 'bg-BG',
                                'hr': 'hr-HR',
                                'sk': 'sk-SK',
                                'sl': 'sl-SI',
                                'et': 'et-EE',
                                'lv': 'lv-LV',
                                'lt': 'lt-LT',
                                'el': 'el-GR',
                                'he': 'he-IL',
                                'th': 'th-TH',
                                'vi': 'vi-VN',
                                'id': 'id-ID',
                                'ms': 'ms-MY',
                                'tl': 'fil-PH',
                                'af': 'af-ZA',
                                'bn': 'bn-BD',
                                'gu': 'gu-IN',
                                'ta': 'ta-IN',
                                'te': 'te-IN',
                                'uk': 'uk-UA'
                            };

                            recognition.lang = recognitionLangMap[fromLanguage] || 'en-US';

                            recognition.onstart = () => {
                                showToast('üé§ Neural voice recognition active! Speak now...', 'info');
                                document.getElementById('inputText').placeholder = 'Listening... Speak now!';
                            };

                            recognition.onresult = (event) => {
                                let finalTranscript = '';
                                let interimTranscript = '';

                                for (let i = event.resultIndex; i < event.results.length; i++) {
                                    const transcript = event.results[i][0].transcript;
                                    if (event.results[i].isFinal) {
                                        finalTranscript += transcript;
                                    } else {
                                        interimTranscript += transcript;
                                    }
                                }

                                // Update input field with interim results
                                document.getElementById('inputText').value = finalTranscript + interimTranscript;
                                updateCharCount();

                                // If we have final results, translate
                                if (finalTranscript) {
                                    translateText();
                                    showToast('‚úÖ Voice input captured: "' + finalTranscript.substring(0, 50) + (finalTranscript.length > 50 ? '...' : '') + '"', 'success');
                                }
                            };

                            recognition.onerror = (event) => {
                                let errorMessage = 'Voice recognition error';

                                switch (event.error) {
                                    case 'no-speech':
                                        errorMessage = 'No speech detected. Please try again.';
                                        break;
                                    case 'audio-capture':
                                        errorMessage = 'Microphone not accessible. Please check permissions.';
                                        break;
                                    case 'not-allowed':
                                        errorMessage = 'Microphone access denied. Please allow microphone access.';
                                        break;
                                    case 'network':
                                        errorMessage = 'Network error occurred during voice recognition.';
                                        break;
                                    case 'service-not-allowed':
                                        errorMessage = 'Voice recognition service not allowed.';
                                        break;
                                    default:
                                        errorMessage = 'Voice recognition error: ' + event.error;
                                }

                                showToast('‚ùå ' + errorMessage, 'error');
                                toggleVoiceRecognition();
                            };

                            recognition.onend = () => {
                                document.getElementById('inputText').placeholder = 'Enter quantum data for neural processing...';
                                if (isListening) {
                                    toggleVoiceRecognition();
                                }
                            };

                            // Request microphone permission first
                            navigator.mediaDevices.getUserMedia({ audio: true })
                                .then(() => {
                                    recognition.start();
                                })
                                .catch((error) => {
                                    showToast('‚ùå Microphone access denied or not available!', 'error');
                                    toggleVoiceRecognition();
                                });

                        } else {
                            showToast('‚ùå Voice recognition not supported in this browser! Try Chrome, Edge, or Safari.', 'error');
                            toggleVoiceRecognition();
                        }
                    }

                    function stopVoiceRecognition() {
                        if (recognition) {
                            recognition.stop();
                        }
                    }

                    // Learning functions
                    function showLessons(category) {
                        const lessons = lessonData[category] || [];
                        const lessonsContainer = document.getElementById('lessonsList');

                        lessonsContainer.innerHTML = lessons.map(lesson => `
                <div class="lesson-card">
                    <div class="lesson-header">
                        <div>
                            <div class="lesson-title">${lesson.title}</div>
                            <div class="lesson-difficulty ${lesson.difficulty}">${lesson.difficulty}</div>
                        </div>
                        <div style="font-size: 2rem;">${lesson.completed ? '‚úÖ' : '‚è≥'}</div>
                    </div>
                    <div class="lesson-description">${lesson.description}</div>
                    <div class="lesson-stats">
                        <span>‚è±Ô∏è ${lesson.duration}</span>
                        <span>${lesson.completed ? 'Completed' : 'Start Lesson'}</span>
                    </div>
                </div>
            `).join('');

                        showScreen('lessons');
                    }

                    // Quiz functions
                    function startQuiz(category) {
                        const questions = quizQuestions[category] || quizQuestions.vocabulary;
                        currentQuiz = {
                            category,
                            questions: [...questions],
                            userAnswers: [],
                            startTime: Date.now()
                        };
                        currentQuestionIndex = 0;
                        quizScore = 0;

                        showQuestion();
                        showScreen('quiz');
                    }

                    function showQuestion() {
                        const question = currentQuiz.questions[currentQuestionIndex];
                        const questionText = document.getElementById('questionText');
                        const optionsContainer = document.getElementById('quizOptions');
                        const progressBar = document.getElementById('quizProgress');
                        const questionCounter = document.getElementById('questionCounter');

                        questionText.textContent = question.question;

                        optionsContainer.innerHTML = question.options.map((option, index) => `
                <div class="quiz-option" onclick="selectAnswer(${index})">${option}</div>
            `).join('');

                        const progress = ((currentQuestionIndex + 1) / currentQuiz.questions.length) * 100;
                        progressBar.style.width = progress + '%';
                        questionCounter.textContent = `Question ${currentQuestionIndex + 1} of ${currentQuiz.questions.length}`;

                        document.getElementById('nextBtn').disabled = true;
                        document.getElementById('nextBtn').style.display = currentQuestionIndex === currentQuiz.questions.length - 1 ? 'none' : 'block';
                        document.getElementById('finishBtn').style.display = currentQuestionIndex === currentQuiz.questions.length - 1 ? 'block' : 'none';
                    }

                    function selectAnswer(answerIndex) {
                        const options = document.querySelectorAll('.quiz-option');
                        const question = currentQuiz.questions[currentQuestionIndex];

                        // Clear previous selections
                        options.forEach(option => {
                            option.classList.remove('selected', 'correct', 'incorrect');
                        });

                        // Mark selected answer
                        options[answerIndex].classList.add('selected');

                        // Show correct answer after a delay
                        setTimeout(() => {
                            options[question.correct].classList.add('correct');
                            if (answerIndex !== question.correct) {
                                options[answerIndex].classList.add('incorrect');
                            } else {
                                quizScore++;
                            }

                            currentQuiz.userAnswers[currentQuestionIndex] = answerIndex;
                            document.getElementById('nextBtn').disabled = false;

                            // Auto-advance after showing result
                            setTimeout(() => {
                                if (currentQuestionIndex === currentQuiz.questions.length - 1) {
                                    document.getElementById('finishBtn').disabled = false;
                                } else {
                                    nextQuestion();
                                }
                            }, 1500);
                        }, 500);
                    }

                    function nextQuestion() {
                        if (currentQuestionIndex < currentQuiz.questions.length - 1) {
                            currentQuestionIndex++;
                            showQuestion();
                        }
                    }

                    function finishQuiz() {
                        const totalQuestions = currentQuiz.questions.length;
                        const accuracy = Math.round((quizScore / totalQuestions) * 100);
                        const timeSpent = Math.round((Date.now() - currentQuiz.startTime) / 1000);
                        const avgTime = Math.round(timeSpent / totalQuestions * 10) / 10;

                        // Update user stats
                        userStats.testsCompleted++;
                        userStats.overallAccuracy = Math.round((userStats.overallAccuracy + accuracy) / 2);
                        userStats.averageSpeed = Math.round(((userStats.averageSpeed + avgTime) / 2) * 10) / 10;

                        if (accuracy >= 80) {
                            userStats.currentStreak++;
                        } else {
                            userStats.currentStreak = 0;
                        }

                        // Show results
                        showQuizResults(accuracy, timeSpent, avgTime);
                        updateStats();
                    }

                    function showQuizResults(accuracy, timeSpent, avgTime) {
                        const resultsContainer = document.getElementById('resultsStats');

                        resultsContainer.innerHTML = `
                <div class="stat-card">
                    <div class="stat-icon">üéØ</div>
                    <div class="stat-value">${accuracy}%</div>
                    <div class="stat-label">Accuracy</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-value">${quizScore}/${currentQuiz.questions.length}</div>
                    <div class="stat-label">Correct Answers</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚è±Ô∏è</div>
                    <div class="stat-value">${timeSpent}s</div>
                    <div class="stat-label">Total Time</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚ö°</div>
                    <div class="stat-value">${avgTime}s</div>
                    <div class="stat-label">Avg per Question</div>
                </div>
            `;

                        showScreen('results');

                        // Show achievement toast if applicable
                        if (accuracy === 100) {
                            showToast('Perfect Score! Achievement Unlocked! üèÜ', 'success');
                        } else if (accuracy >= 80) {
                            showToast('Excellent Performance! üåü', 'success');
                        }
                    }

                    function updateStats() {
                        document.getElementById('overallAccuracy').textContent = userStats.overallAccuracy + '%';
                        document.getElementById('testsCompleted').textContent = userStats.testsCompleted;
                        document.getElementById('averageSpeed').textContent = userStats.averageSpeed + 's';
                        document.getElementById('currentStreak').textContent = userStats.currentStreak;
                        document.getElementById('wordsLearned').textContent = userStats.wordsLearned.toLocaleString();
                        document.getElementById('level').textContent = userStats.level;
                    }

                    // Utility functions
                    function debounce(func, wait) {
                        let timeout;
                        return function executedFunction(...args) {
                            const later = () => {
                                clearTimeout(timeout);
                                func(...args);
                            };
                            clearTimeout(timeout);
                            timeout = setTimeout(later, wait);
                        };
                    }

                    function showToast(message, type = 'info') {
                        const toast = document.getElementById('toast');
                        toast.textContent = message;
                        toast.className = `toast ${type}`;

                        // Show toast
                        setTimeout(() => toast.classList.add('show'), 100);

                        // Hide toast
                        setTimeout(() => {
                            toast.classList.remove('show');
                        }, 3000);
                    }
                </script>
    </body>
    
    </html>
